---
layout: post
title: Android 资源文件创建与加载
key: 20171218
tags: Android 资源文件
---

### <i class="fa fa-rebel fa-1x" aria-hidden="true"></i> 概述
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Android 应用程序启动之后，资源文件就能够通过 Resource 类访问，说明随着 App 的启动，资源文件已经创建好了，并且保存在 Resource 类中，这个过程是系统做的；本篇内容就是来分析 Resource 是如何初始化及如何通过 Resource 获取资源文件。
### <i class="fa fa-rebel fa-1x" aria-hidden="true"></i> 资源文件Resource的创建
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
通过跟踪源码，发现资源文件 Resource 是在 ContextImpl 初始化方法里面创建的，而我们知道ContextImpl的初始化不是唯一的，在 App 启动的时候会初始化一个全局的ContextImpl，作为整个 App的全局上下文，而每个 Activity 创建的时候也会创建一个ContextImpl 与之对应，此时ContextImpl 为当前 Activity 的上下文，会随 Activity 的销毁而销毁；那么，问题来了，Resource应该是全局的资源文件，不应该是每个 Activity 的创建的时候都创建一遍，所以需要通过缓存的方式把资源缓存起来，流程图如下：
![](/assets/assetcreate/AssetCreat.png)
### <i class="fa fa-rebel fa-1x" aria-hidden="true"></i> 资源文件的加载
##### <i class="fa fa-star" aria-hidden="true"></i> 资源文件加载流程图
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
![](/assets/assetcreate/getAsset.png)

